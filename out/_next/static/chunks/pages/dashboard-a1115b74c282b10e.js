(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{7100:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(6298)}])},6298:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ew});var a=s(4848),l=s(6540),n=s(9532),r=s(3237),i=s(7432),o=s(6061),c=s(6385),d=s(3914),u=s(6188),m=s(6879),x=s(1464);let b=e=>{let{compostBin:t,onDeleteBin:s,onEditCompostBin:n}=e,[i,o]=(0,l.useState)(!1),{textAccent:c}=(0,m.q)(r.h.Compost),b=(0,a.jsxs)(a.Fragment,{children:["Are you sure you want to remove ",(0,a.jsx)("strong",{children:t.name}),"?"]});return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-5 shadow-sm transition flex flex-col ",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-start justify-between border-b border-gray-300",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:t.name}),(0,a.jsxs)("div",{className:"flex gap-3 text-sm",children:[(0,a.jsx)("button",{type:"button",className:"text-[#475569] focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-[#244225] rounded-sm",onClick:()=>{n(t)},"aria-label":"Edit ".concat(t.name),children:(0,a.jsx)(d.g,{icon:u.hpd})}),(0,a.jsx)("button",{type:"button",onClick:()=>o(!0),className:"text-[#991b1b] focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-[#244225] rounded-sm","aria-label":"Delete ".concat(t.name),children:(0,a.jsx)(d.g,{icon:u.yLS,"aria-hidden":"true"})})]}),(0,a.jsx)(x.A,{isOpen:i,onClose:()=>o(!1),onConfirm:()=>{s(t.id),o(!1)},confirmLabel:"Remove bin",title:"Remove Bin",message:b})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2 mb-2 text-sm text-gray-700",children:[(0,a.jsx)(d.g,{icon:u.v3E,"aria-hidden":"true",className:c}),(0,a.jsx)("strong",{className:"text-gray-800",children:"Type:"})," ",t.type]}),(0,a.jsxs)("p",{className:"flex items-center gap-2 mb-2 text-sm text-gray-700",children:[(0,a.jsx)(d.g,{icon:u.QRE,"aria-hidden":"true",className:"mr-[0px] ".concat(c)}),(0,a.jsx)("strong",{className:"text-gray-800",children:"Status:"})," ",(0,a.jsx)("span",{className:"inline-block bg-[#d9e9da] text-[#2a452c] text-xs font-medium px-2 py-0.5 rounded-full",children:t.status})]}),t.notes&&(0,a.jsx)("div",{className:"min-h-[24px] mt-2 [overflow-wrap:anywhere]",children:(0,a.jsxs)("p",{className:"flex items-start gap-2 text-sm text-gray-700",children:[(0,a.jsx)(d.g,{icon:u.n0g,"aria-hidden":"true",className:"mt-[2px] ".concat(c)}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Notes:"})," ",t.notes]})]})})]})]},t.id)})};var g=s(312),h=s.n(g),p=s(2636),f=s(2441),y=s(4164),v=s(5588);function j(e){let{id:t,label:s,value:l,onChange:n,options:r,error:i,required:o,disabled:c}=e;return(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("select",{id:t,value:l,onChange:e=>n(e.target.value),required:o,disabled:c,"aria-invalid":!!i,"aria-describedby":i?"".concat(t,"-error"):void 0,className:(0,y.$)("relative z-0 peer w-full bg-white border border-gray-300 rounded-md p-4 text-base text-gray-900 placeholder-transparent shadow-sm focus:outline-none focus:border-[#2a452c] focus-visible:ring-2 focus-visible:ring-[#2a452c] appearance-none pr-10",i&&"border-red-500 focus:ring-red-500"),children:[(0,a.jsx)("option",{value:"",disabled:!0,hidden:!0}),r.map(e=>(0,a.jsx)("option",{value:e.value,disabled:e.disabled,children:e.label},e.value))]}),(0,a.jsx)("label",{htmlFor:t,className:(0,v.p)(""!==l),children:s}),(0,a.jsxs)("div",{className:"flex justify-between text-xs mt-1",children:[(0,a.jsx)("p",{id:"".concat(t,"-error"),className:(0,y.$)("text-red-600 pl-2 h-4",!i&&"invisible"),children:i}),(0,a.jsx)("span",{className:"invisible",children:"."})]}),(0,a.jsx)("span",{"aria-hidden":"true",className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-gray-500",children:(0,a.jsx)(d.g,{icon:u.Jt$,className:"ml-2 text-[12px] mb-4","aria-hidden":"true"})})]})}let N=e=>{let{name:t,value:s,onChange:l,options:n,className:r="",label:i,error:o}=e;return(0,a.jsxs)("fieldset",{className:r,"aria-invalid":o?"true":void 0,"aria-describedby":o?"".concat(t,"-error"):void 0,children:[i&&(0,a.jsx)("legend",{className:"block text-sm font-medium text-gray-700 mb-2",children:i}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3",children:n.map(e=>{let n="inline-flex items-center gap-2 px-4 py-2.5 rounded-md border cursor-pointer transition-all select-none ".concat(s===e.value?"border-orange-600 bg-orange-50 text-gray-900":"bg-white border-gray-300 text-gray-700 hover:border-gray-400 hover:bg-gray-50");return(0,a.jsxs)("label",{className:n,children:[(0,a.jsxs)("span",{className:"relative w-5 h-5 flex-shrink-0",children:[(0,a.jsx)("input",{type:"radio",name:t,value:e.value,checked:s===e.value,onChange:()=>l(e.value),className:"peer appearance-none w-5 h-5 rounded-full border border-gray-400 outline-none cursor-pointer   focus:ring-2 focus:ring-orange-500 focus:ring-offset-1"}),(0,a.jsx)("span",{className:"pointer-events-none absolute inset-0 m-auto w-2.5 h-2.5 rounded-full bg-orange-600 opacity-0 scale-75 transition-all duration-200 ease-out peer-checked:opacity-100 peer-checked:scale-100"})]}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.label})]},e.value)})}),o&&(0,a.jsx)("p",{id:"".concat(t,"-error"),className:"mt-1 text-sm text-red-600",children:o})]})},k=[{value:"Worm",label:"Worm"},{value:"Leaf",label:"Leaf"},{value:"Hot",label:"Hot"},{value:"Cold",label:"Cold"}],w=[{value:"Active",label:"Active"},{value:"Ready",label:"Ready"},{value:"Emptied",label:"Emptied"}],C=e=>{let{isOpen:t,onClose:s,onSaveCompostBin:n,compostBinToEdit:r}=e,[i,o]=(0,l.useState)(""),[c,m]=(0,l.useState)(""),[x,b]=(0,l.useState)("Active"),[g,y]=(0,l.useState)(""),[v,C]=(0,l.useState)({});(0,l.useEffect)(()=>{if(t){if(r){var e,s,a,l;o(null!==(e=r.name)&&void 0!==e?e:""),m(null!==(s=r.type)&&void 0!==s?s:""),b(null!==(a=r.status)&&void 0!==a?a:"Active"),y(null!==(l=r.notes)&&void 0!==l?l:"")}else o(""),m(""),b("Active"),y("");C({})}},[t,r]);let S=()=>{o(""),m(""),y(""),b(""),C({}),s()},A={title:r?"Edit Bin":"Add New Bin",button:r?"Update Bin":"Add Bin",description:r?"Update the details of this compost bin.":"Start planning a new compost bin for your space."};return(0,a.jsxs)(h(),{isOpen:t,onRequestClose:S,contentLabel:A.title,role:"dialog",className:"relative w-full max-w-md mx-auto bg-white p-8 xs:rounded-lg shadow border border-gray-200 focus:outline-none",overlayClassName:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!1,aria:{modal:!0,labelledby:"modal-title",describedby:"modal-description"},children:[(0,a.jsx)("button",{type:"button",onClick:S,"aria-label":"Close",className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#2a452c] focus-visible:rounded-md w-5 h-5",children:(0,a.jsx)(d.g,{icon:u.GRI,"aria-hidden":"true"})}),(0,a.jsxs)("h2",{id:"modal-title",className:"text-2xl font-bold text-center text-[#2a452c] mt-6 mb-2",children:[(0,a.jsx)(d.g,{icon:u.v3E,className:"mr-1","aria-hidden":"true"}),A.title]}),(0,a.jsx)("p",{id:"modal-description",className:"text-sm text-center text-gray-600 mb-8",children:A.description}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t={};if(i.trim()||(t.name="Please enter a bin name."),c||(t.type="Please enter a bin type."),Object.keys(t).length>0){C(t);return}n(i.trim(),c,x,g.trim()),p.oR.success(r?"Bin updated successfully!":"New bin added!"),o(""),m(""),b(""),y(""),s()},className:"space-y-4",children:[(0,a.jsx)(f.z,{id:"name",label:"Name",value:i,onChange:e=>{o(e),C(e=>({...e,name:""}))},error:v.name,maxLength:24}),(0,a.jsx)(j,{id:"compost-type",label:"Select type",value:c,onChange:e=>{m(e),C(e=>({...e,type:""}))},options:k,error:v.type}),r&&(0,a.jsx)(N,{name:"compost-status",value:x,className:"pb-5",onChange:e=>b(e),options:w}),(0,a.jsx)(f.z,{id:"bin-notes",label:"Notes (Optional)",value:g,onChange:y,type:"textarea",maxLength:500}),(0,a.jsxs)("button",{type:"submit",className:"mt-2 w-full bg-orange-700 text-white font-semibold text-sm py-2 rounded hover:bg-orange-800 transition flex items-center justify-center",children:[(0,a.jsx)(d.g,{icon:u.QLR,className:"mr-2","aria-hidden":"true"}),A.button]})]})]})},S=e=>{let{compostBins:t,onAddCompostBin:s,onDeleteBin:n,onEditCompostBin:r}=e,[i,o]=(0,l.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsx)("button",{type:"button",onClick:()=>o(!0),className:"bg-[#244225] text-white text-sm px-4 py-2 rounded hover:bg-[#356a3c] transition focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#244225]",children:"+ Add Bin"})}),(0,a.jsx)(C,{isOpen:i,onClose:()=>o(!1),onSaveCompostBin:s}),(0,a.jsx)("section",{"aria-label":"Soil records",children:0===t.length?(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,a.jsx)("p",{className:"text-lg mb-2",children:"No Compost Bins yet"}),(0,a.jsx)("p",{className:"text-sm",children:'Click "Add Bin" to create your first compost bin.'})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:t.map(e=>(0,a.jsx)(b,{compostBin:e,onDeleteBin:n,onEditCompostBin:r},e.id))})})]})};var A=s(6962),D=s(3656);let E=e=>{let{onNavigate:t,onOpenMenu:s}=e,{compostBins:n,addCompostBin:i,updateCompostBin:d,deleteCompostBin:u}=(0,A.M)(),[m,x]=(0,l.useState)(null),b=null!==m,g=[{label:"Dashboard",onClick:()=>null==t?void 0:t(r.h.Dashboard)},{label:"Compost"}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{breadcrumbItems:g,onOpenMenu:s}),(0,a.jsx)(o.A,{title:"Compost",description:"Manage your composting activities and track compost usage.",imageSrc:"".concat(D.o,"/images/compost.png"),imageAlt:"compost bin icon"}),(0,a.jsx)(S,{compostBins:n,onAddCompostBin:i,onDeleteBin:e=>{u(e),p.Ay.success("Compost bin deleted successfully")},onEditCompostBin:e=>x(e)}),(0,a.jsx)(C,{isOpen:b,onClose:()=>x(null),onSaveCompostBin:(e,t,s,a)=>{m?(d({...m,name:e,type:t,status:s,notes:a}),x(null)):i(e,t,s,a)},compostBinToEdit:m})]})};var O=s(3329),R=s(8118),T=s(7451);let H=e=>{let{id:t,cropId:s,cropName:n,bedName:i,datePlanted:o,notes:c}=e,[b,g]=(0,l.useState)(!1),{beds:h}=(0,R.u)(),{deletePlanting:f}=(0,T.C)(),{textAccent:y,bgAccent:v}=(0,m.q)(r.h.PlantLog),j=h.some(e=>e.crops.some(e=>e.id===s)),N=j?"text-gray-400":"text-[#1e61cd]",k=(0,a.jsxs)(a.Fragment,{children:["Are you sure you want to delete the planting of"," ",(0,a.jsx)("strong",{children:n}),"?"]});return(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-5 shadow-sm transition flex flex-col",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-start justify-between border-b border-gray-300",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:n}),(0,a.jsxs)("div",{className:"relative inline-block group text-sm",children:[(0,a.jsx)("button",{type:"button",onClick:()=>g(!0),disabled:j,className:"".concat(N,"  focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-[#244225] rounded-sm"),"aria-label":"Delete planting of ".concat(n),children:(0,a.jsx)(d.g,{icon:u.yLS,"aria-hidden":"true"})}),j&&(0,a.jsx)("span",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-1 whitespace-nowrap rounded ".concat(v," px-2 py-1 text-xs text-white opacity-0 translate-y-1 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-200 ease-out z-10"),children:"Cannot delete while crop is active in a bed"})]}),(0,a.jsx)(x.A,{isOpen:b,onClose:()=>g(!1),onConfirm:()=>{f(t),p.Ay.success("".concat(n," was deleted from history")),g(!1)},title:"Delete Planting",message:k})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 space-y-2",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.g,{icon:u.gKm,className:y,"aria-hidden":"true"}),(0,a.jsx)("strong",{children:"Location:"})," ",i]}),(0,a.jsxs)("p",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(d.g,{icon:u.l6G,"aria-hidden":"true",className:y}),(0,a.jsx)("strong",{children:"Planted:"})," ",(0,O.Y)(o)," "]}),(0,a.jsx)("div",{className:"min-h-[24px] [overflow-wrap:anywhere]",children:(null==c?void 0:c.trim())?(0,a.jsxs)("p",{className:"flex items-start gap-2",children:[(0,a.jsx)(d.g,{icon:u.n0g,"aria-hidden":"true",className:"mt-[2px] ".concat(y)}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Notes:"})," ",c]})]}):null})]})]},t)},L=e=>{let{plantingHistory:t}=e;return(0,a.jsx)("section",{"aria-label":"Planting history",children:0===t.length?(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,a.jsx)("p",{className:"text-lg mb-2",children:"No Planting History Yet"}),(0,a.jsx)("p",{className:"text-sm",children:"Plantings will appear here as you add crops to your beds."})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:t.map(e=>(0,a.jsx)(H,{id:e.id,cropId:e.cropId,cropName:e.cropName,bedName:e.bedName,datePlanted:e.datePlanted,notes:e.notes},e.id))})})},F=e=>{let{label:t,options:s,selected:l,type:n="checkbox",name:r,onChange:i,bgAccent:o,checkedBgAccent:c,borderAccent:m}=e,x="\n    peer appearance-none w-5 h-5 border bg-white\n    ".concat("radio"===n?"rounded-full":"rounded","\n    ").concat("checkbox"===n?c:"","\n    focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2\n    focus-visible:outline-").concat(m,"\n  "),b=e=>"checkbox"===n?l.includes(e):l[0]===e,g=(e,t)=>"checkbox"===n?0:l.length>0?b(e)?0:-1:0===t?0:-1;return(0,a.jsxs)("div",{className:"mb-6 bg-white rounded-lg border border-gray-200 p-4 shadow-sm",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-3",children:t}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.map((e,t)=>(0,a.jsxs)("label",{className:"inline-flex items-center cursor-pointer gap-2",children:[(0,a.jsxs)("span",{className:"relative w-5 h-5 flex-shrink-0",children:[(0,a.jsx)("input",{type:n,name:r,value:e,checked:b(e),onChange:()=>i(e),className:x,"aria-labelledby":"".concat(r,"-").concat(e),tabIndex:g(e,t)}),"checkbox"===n?(0,a.jsx)(d.g,{icon:u.e68,className:"w-4 h-4 text-white absolute pointer-events-none opacity-0 scale-75 transition-all duration-200 ease-out peer-checked:opacity-100 left-0 top-0 m-0.5"}):(0,a.jsx)("span",{className:"absolute inset-0 m-auto w-2.5 h-2.5 rounded-full opacity-0 scale-75 transition-all duration-200 ease-out peer-checked:opacity-100 peer-checked:scale-100 ".concat(o)})]}),(0,a.jsx)("span",{id:"".concat(r,"-").concat(e),className:"text-[13px] leading-snug break-words max-w-[160px] truncate",title:e,children:e})]},e))})]})},B=(e,t)=>e.includes(t)?e.filter(e=>e!==t):[...e,t],I=e=>{let{isOpen:t,onClose:s,groups:n,controller:r,bgAccent:i,checkedBgAccent:o,borderAccent:c}=e,[m,x]=(0,l.useState)(t),[b,g]=(0,l.useState)(!1),h=(0,l.useRef)(null),[p,f]=(0,l.useState)(r.values);return((0,l.useLayoutEffect)(()=>{t&&(x(!0),requestAnimationFrame(()=>g(!0)),f(r.values))},[t,r.values]),(0,l.useEffect)(()=>{if(!t&&m){g(!1);let e=setTimeout(()=>x(!1),300);return()=>clearTimeout(e)}},[t,m]),m)?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex justify-end",onClick:e=>{h.current&&!h.current.contains(e.target)&&s()},role:"presentation",children:(0,a.jsxs)("div",{ref:h,className:"\n    bg-gray-50 w-84 max-w-full h-full shadow-lg p-6 relative\n    transform transition-transform duration-300 ease-in-out\n    ".concat(b?"translate-x-0":"translate-x-full","\n    flex flex-col\n  "),role:"dialog","aria-modal":"true","aria-labelledby":"dialog-title",children:[(0,a.jsx)("button",{type:"button",onClick:s,"aria-label":"Close filters",className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:(0,a.jsx)(d.g,{icon:u.GRI})}),(0,a.jsx)("h2",{id:"dialog-title",className:"text-xl font-semibold mb-6",children:"All Filters"}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto pr-2",children:n.map(e=>{let t=p[e.key],s="multi"===e.type?null!=t?t:[]:t?[t]:[];return(0,a.jsx)(F,{label:e.label,options:e.options,selected:s,type:"single"===e.type?"radio":void 0,onChange:t=>{f(s=>{let a=s[e.key];if("multi"!==e.type)return{...s,[e.key]:t};{let l=B(null!=a?a:[],t);return{...s,[e.key]:l}}})},bgAccent:i,checkedBgAccent:o,borderAccent:c},e.key)})}),(0,a.jsxs)("div",{className:"flex-shrink-0 flex justify-between mt-6 pt-4 border-t border-gray-200",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{let e={};for(let t of n)e[t.key]="multi"===t.type?[]:null;f(e)},className:"text-gray-600 font-medium hover:underline",children:"Clear All"}),(0,a.jsx)("button",{type:"button",onClick:()=>{for(let t of n){var e;r.setValue(t.key,null!==(e=p[t.key])&&void 0!==e?e:"multi"===t.type?[]:null)}s()},className:"text-white bg-[#557C2D] px-6 py-2 rounded-lg font-medium shadow-md hover:brightness-110 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-lime-500",children:"Apply"})]})]})}):null},q=e=>{let{onClick:t}=e;return(0,a.jsxs)("button",{type:"button",onClick:t,className:"rounded-full px-4 py-2 text-sm border border-gray-300 bg-white text-gray-700 flex items-center gap-2 transition",children:[(0,a.jsx)(d.g,{icon:u._$s,"aria-hidden":"true"}),"All Filters"]})},M=(e,t,s)=>{(0,l.useEffect)(()=>{if(!t)return;let a=t=>{let a=e.current;a&&!a.contains(t.target)&&s()},l=e=>{"Escape"===e.key&&s()};return document.addEventListener("pointerdown",a,!0),document.addEventListener("keydown",l),()=>{document.removeEventListener("pointerdown",a,!0),document.removeEventListener("keydown",l)}},[t,s,e])},P=e=>{let{label:t,options:s,selectedIds:n,onChange:r,open:i,onButtonClick:o,bgAccent:c,altCheckedBgAccent:m,onClose:x}=e,b=(0,l.useRef)(null);M(b,i,x);let g=(0,l.useId)(),h="".concat(g,"-btn"),p="".concat(g,"-listbox"),f=n.length>0,y="".concat("w-full rounded-full px-4 py-2 text-sm border transition-colors flex justify-between items-center whitespace-nowrap"," ").concat(f?"".concat(c," border-transparent text-white hover:opacity-90"):"bg-white border-gray-300 text-gray-700"),v=(0,l.useMemo)(()=>new Set(n),[n]),j=e=>v.has(e),N=e=>"".concat("cursor-pointer select-none px-4 py-2 text-sm"," ").concat(j(e)?"".concat(c," text-white"):"hover:bg-[#F1F8EB] text-gray-700 hover:text-gray-900"),k=(0,l.useMemo)(()=>{if(0===n.length)return t;if(1===n.length){let e=s.find(e=>e.id===n[0]);return e?e.label:t}return"".concat(t," - ").concat(n.length)},[t,s,n]),w=e=>{r(v.has(e)?n.filter(t=>t!==e):[...n,e])},C=(e,t)=>{"Enter"===e.key||" "===e.key?(e.preventDefault(),w(t)):"Escape"===e.key&&(e.preventDefault(),x())};return(0,a.jsxs)("div",{ref:b,className:"relative inline-block text-left",children:[(0,a.jsxs)("button",{id:h,type:"button",className:y,onClick:o,"aria-haspopup":"listbox","aria-expanded":i,"aria-controls":p,children:[k,(0,a.jsx)(d.g,{icon:u.Jt$,className:"ml-2 text-[12px]","aria-hidden":"true"})]}),i&&(0,a.jsxs)("div",{id:p,role:"listbox","aria-labelledby":h,"aria-multiselectable":"true",className:"absolute z-[99] mt-2 w-64 rounded-md border bg-white shadow-lg flex flex-col",children:[s.length>0?(0,a.jsx)("div",{className:"py-1 max-h-60 overflow-y-auto",children:s.map(e=>{let t=j(e.id);return(0,a.jsx)("div",{role:"option","aria-selected":t,tabIndex:0,className:N(e.id),onClick:()=>w(e.id),onKeyDown:t=>C(t,e.id),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"relative w-5 h-5 flex-shrink-0",children:[(0,a.jsx)("input",{type:"checkbox",checked:t,readOnly:!0,tabIndex:-1,role:"presentation",className:"peer appearance-none w-5 h-5 border border-gray-300 rounded ".concat(m," checked:border-transparent ")}),(0,a.jsx)(d.g,{icon:u.e68,className:"w-4 h-4 text-white absolute pointer-events-none opacity-0 scale-75 transition-all duration-200 ease-out peer-checked:opacity-100 peer-checked:scale-100 left-0 top-0 m-0.5","aria-hidden":"true"})]}),(0,a.jsx)("span",{className:"truncate",children:e.label})]})},e.id)})}):(0,a.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No options available"}),s.length>0&&n.length>0&&(0,a.jsx)("div",{className:"border-t px-2 py-2",children:(0,a.jsx)("div",{className:"flex items-center justify-end",children:(0,a.jsx)("button",{type:"button",className:"text-xs underline underline-offset-2 focus:outline-none focus:ring-2 focus:ring-[#478143] focus:ring-offset-1",onClick:()=>r([]),"aria-label":"Clear all selections",children:"Reset"})})})]})]})},z=(e,t)=>{let s="cursor-pointer select-none px-4 py-2 text-sm";return e?"".concat(s," ").concat(t," text-white font-semibold"):"".concat(s," bg-white text-gray-700 hover:bg-gray-200 hover:text-gray-900")},_=e=>{let{label:t,value:s,options:n,bgAccent:r,onChange:i,open:o,onButtonClick:c,onClose:m}=e,x=(0,l.useRef)(null);M(x,o,m);let b=(0,l.useId)(),g="".concat(b,"-btn"),h="".concat(b,"-listbox"),p=null!==s,f=null!=s?s:t,y="".concat("w-full rounded-full px-4 py-2 text-sm border transition-colors flex justify-between items-center whitespace-nowrap"," ").concat(p?"bg-[#557C2D] border-transparent text-white":"bg-white border-gray-300 text-gray-700"),v=e=>{i(e),m()},j=(e,t)=>{"Enter"===e.key||" "===e.key?(e.preventDefault(),null===t?i(null):i(t),m()):"Escape"===e.key&&(e.preventDefault(),m())};return(0,a.jsxs)("div",{ref:x,className:"relative w-36",children:[(0,a.jsxs)("button",{id:g,type:"button",className:y,onClick:c,"aria-haspopup":"listbox","aria-expanded":o,"aria-controls":h,children:[f,(0,a.jsx)(d.g,{icon:u.Jt$,className:"ml-2 text-[12px]","aria-hidden":"true"})]}),o&&(0,a.jsxs)("div",{id:h,role:"listbox","aria-labelledby":g,className:"absolute z-[99] mt-1 max-h-60 w-full overflow-y-auto rounded-md border border-gray-200 bg-white shadow-md py-1",children:[(0,a.jsx)("div",{role:"option","aria-selected":null===s,tabIndex:0,className:z(null===s,r),onClick:()=>{i(null),m()},onKeyDown:e=>j(e,null),children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:t}),null===s&&(0,a.jsx)(d.g,{icon:u.e68,className:"ml-2","aria-hidden":"true"})]})}),n.map(e=>{let t=s===e;return(0,a.jsx)("div",{role:"option","aria-selected":t,tabIndex:0,className:z(t,r),onClick:()=>v(e),onKeyDown:t=>j(t,e),children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:e}),t&&(0,a.jsx)(d.g,{icon:u.e68,className:"ml-2","aria-hidden":"true"})]})},e)})]})]})},U=e=>{let{groups:t,controller:s,bgAccent:n,onOpenFilters:r,altCheckedBgAccent:i}=e,[o,c]=(0,l.useState)(null),d=e=>{c(t=>t===e?null:e)},u=()=>c(null);return(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap mb-6",children:[t.map(e=>{var t,l;if("multi"===e.type){let l=null!==(t=s.values[e.key])&&void 0!==t?t:[],r=e.options.map(e=>({id:e,label:e}));return(0,a.jsx)(P,{label:"All ".concat(e.label),options:r,selectedIds:l,onChange:t=>s.setValue(e.key,t),open:o===e.key,onButtonClick:()=>d(e.key),onClose:u,bgAccent:n,altCheckedBgAccent:i},e.key)}return(0,a.jsx)(_,{label:"All ".concat(e.label,"s"),value:null!==(l=s.values[e.key])&&void 0!==l?l:null,options:e.options,bgAccent:"bg-[#557C2D]",onChange:t=>s.setValue(e.key,t),open:o===e.key,onButtonClick:()=>d(e.key),onClose:u},e.key)}),(0,a.jsx)(q,{onClick:r}),(0,a.jsx)("button",{type:"button",onClick:()=>{s.clearAll(),u()},disabled:!s.hasActive,className:"px-3 py-2 text-sm text-gray-700 font-bold hover:underline underline-offset-4 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#478143] focus-visible:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"})]})},G=()=>{let[e,t]=(0,l.useState)(!1),{cropFilter:s,setCropFilter:n,bedFilter:i,setBedFilter:o,dateFilter:c,setDateFilter:d,cropOptions:u,bedOptions:x,dateOptions:b,clearFilters:g,hasActiveFilters:h}=(0,T.C)(),{bgAccent:p,checkedBgAccent:f,altCheckedBgAccent:y,borderAccent:v}=(0,m.q)(r.h.PlantLog),j=[{key:"crops",label:"Crops",type:"multi",options:u},{key:"beds",label:"Beds",type:"multi",options:x},{key:"date",label:"Date",type:"single",options:b}],N={values:{crops:s,beds:i,date:c},setValue:(e,t)=>{if("crops"===e){n(Array.isArray(t)?t:[]);return}if("beds"===e){o(Array.isArray(t)?t:[]);return}if("date"===e){d("string"==typeof t&&t.trim().length>0?t:null);return}},clearAll:g,hasActive:h};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U,{groups:j,controller:N,bgAccent:p,onOpenFilters:()=>t(!0),altCheckedBgAccent:y}),(0,a.jsx)(I,{isOpen:e,onClose:()=>t(!1),groups:j,controller:N,bgAccent:p,checkedBgAccent:f,borderAccent:v})]})},K=e=>{let{onNavigate:t,onOpenMenu:s}=e,{filteredPlantings:l}=(0,T.C)(),n=[{label:"Dashboard",onClick:()=>null==t?void 0:t(r.h.Dashboard)},{label:"Plant Log"}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{breadcrumbItems:n,onOpenMenu:s}),(0,a.jsx)(o.A,{title:"Plant Log",description:"Review past plantings to learn what worked where.",imageSrc:"".concat(D.o,"/images/planting.png"),imageAlt:"sprout icon"}),(0,a.jsx)(G,{}),(0,a.jsx)(L,{plantingHistory:l})]})},Q=e=>({"plant-care":"bg-emerald-500","growth-support":"bg-amber-500","soil-compost":"bg-lime-600",harvest:"bg-yellow-500",misc:"bg-gray-500"})[e],V=e=>({"plant-care":"Plant Care","growth-support":"Growth Support","soil-compost":"Soil/Compost",harvest:"Harvest",misc:"Miscellaneous"})[e],Y=e=>({daily:"daily",weekly:"weekly",monthly:"monthly"})[e],J=e=>{let{task:t,onToggleComplete:s,onEditTask:n,onDeleteTask:r}=e,[i,o]=(0,l.useState)(!1),c=(0,a.jsxs)(a.Fragment,{children:["Are you sure you want to remove ",(0,a.jsx)("strong",{children:t.name}),"?"]}),m=t.completed;return(0,a.jsxs)("li",{className:"flex items-center justify-between border bg-white px-4 py-3 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 ali",children:[(0,a.jsx)("div",{className:"flex items-center ",children:(0,a.jsx)("label",{className:"mt-0.5 inline-grid h-5 w-5 place-items-center",children:(0,a.jsxs)("span",{className:"relative w-5 h-5 flex-shrink-0",children:[(0,a.jsx)("input",{id:"task-".concat(t.id,"-checkbox"),type:"checkbox",checked:m,onChange:e=>s(t.id,e.target.checked),className:"\n  peer appearance-none w-5 h-5 border bg-white\n  checked:bg-[#d1a052]\n  focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2\n  focus-visible:outline-[#d1a052]\n","aria-labelledby":"task-".concat(t.id,"-label"),"aria-describedby":"task-".concat(t.id,"-meta")}),(0,a.jsx)(d.g,{icon:u.e68,"aria-hidden":"true",className:"w-4 h-4 text-white absolute pointer-events-none opacity-0 scale-75 transition-all duration-200 ease-out peer-checked:opacity-100 left-0 top-0 m-0.5"})]})})}),(0,a.jsxs)("div",{className:" border-l border-gray-100 pl-3",children:[(0,a.jsx)("div",{id:"task-".concat(t.id,"-label"),className:"text-sm font-medium ".concat(m?"line-through opacity-70":""),children:t.name}),(0,a.jsxs)("div",{id:"task-".concat(t.id,"-meta"),className:"flex flex-wrap items-center gap-2 text-xs text-gray-600 dark:text-gray-300",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"inline-block h-2.5 w-2.5 rounded-full ".concat(Q(t.category))}),V(t.category)]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{className:"rounded-full border px-2 bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-200",children:Y(t.frequency)}),"default"===t.type&&(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full bg-[#dff5e1] text-[#2a452c]",children:"default"})]})]})]}),"custom"===t.type&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,a.jsx)("button",{type:"button","aria-label":"Edit task",onClick:()=>{n(t)},className:"text-[#475569] focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-[#244225]",title:"Edit",children:(0,a.jsx)(d.g,{"aria-hidden":"true",icon:u.hpd,className:"h-3 w-3 text-[#475569]"})}),(0,a.jsx)("button",{type:"button","aria-label":"Delete task",onClick:()=>o(!0),className:"text-[#991b1b] focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-[#244225]",title:"Delete",children:(0,a.jsx)(d.g,{"aria-hidden":"true",icon:u.yLS,className:"h-3 w-3 text-[#991b1b]"})}),(0,a.jsx)(x.A,{isOpen:i,onClose:()=>o(!1),onConfirm:()=>{r(t.id),o(!1)},confirmLabel:"Remove Task",title:"Remove Task",message:c})]})]})},$=e=>{let{visibleTasks:t,onEditTask:s,onDeleteTask:l,toggleComplete:n}=e;return(0,a.jsx)("ul",{className:"w-full space-y-3","aria-live":"polite","aria-relevant":"additions removals",children:t.map(e=>(0,a.jsx)(J,{task:e,onToggleComplete:n,onEditTask:s,onDeleteTask:l},e.id))})};var W=s(4518);let X=()=>{let{tasks:e}=(0,W.U)(),t=(0,l.useMemo)(()=>e.filter(e=>!e.hidden),[e]),s=t.length,a=t.filter(e=>e.completed).length;return{totalTasks:s,completedTasks:a,percentage:s>0?a/s*100:0,taskFrequencyNotComplete:{daily:t.filter(e=>"daily"===e.frequency&&!e.completed).length,weekly:t.filter(e=>"weekly"===e.frequency&&!e.completed).length,monthly:t.filter(e=>"monthly"===e.frequency&&!e.completed).length},isEmpty:0===s,allDone:s>0&&a===s}},Z=e=>{let{isOpen:t,onClose:s}=e,{tasks:n,toggleDefaultTaskVisibility:r,setTaskCompleted:i}=(0,W.U)(),[o,c]=(0,l.useState)(!1),m=(0,l.useMemo)(()=>n.filter(e=>"default"===e.type),[n]),[x,b]=(0,l.useState)({});(0,l.useEffect)(()=>{if(!t)return;let e={};m.forEach(t=>{e[t.id]=!t.hidden}),b(e)},[t,m]);let g=e=>{b(t=>({...t,[e]:!t[e]})),c(!1)};return(0,a.jsxs)(h(),{isOpen:t,onRequestClose:s,shouldCloseOnEsc:!0,shouldReturnFocusAfterClose:!0,contentLabel:"Manage Default Tasks",aria:{labelledby:"manage-defaults-title",describedby:"manage-defaults-desc"},className:"relative w-full max-w-md mx-auto mt-24 bg-white dark:bg-dark-bg p-6 rounded-lg shadow border border-gray-200 focus:outline-none",overlayClassName:"fixed inset-0 bg-black/40 z-50 flex items-start justify-center",children:[(0,a.jsx)("button",{type:"button",onClick:s,"aria-label":"Close Manage Default Tasks",className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#2a452c] rounded-md w-5 h-5",children:(0,a.jsx)(d.g,{icon:u.GRI,"aria-hidden":"true"})}),(0,a.jsx)("h2",{id:"manage-defaults-title",className:"text-lg font-semibold text-[#2a452c] mb-1",children:"Manage Default Tasks"}),(0,a.jsx)("p",{id:"manage-defaults-desc",className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Uncheck any default tasks you do not want to appear in your list. You can re-enable them anytime."}),(0,a.jsxs)("div",{className:"mb-3 flex items-center gap-2",children:[(0,a.jsx)("button",{type:"button","aria-controls":"manage-defaults-fieldset",className:"text-xs px-2 py-1 rounded border border-[#cbbf9c] text-[#4a4220] bg-[#faf9f5] hover:bg-[#f3efe5] transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#2a452c]",onClick:()=>{b(e=>Object.fromEntries(Object.keys(e).map(e=>[e,!0]))),c(!1)},children:"Select all"}),(0,a.jsx)("button",{type:"button","aria-controls":"manage-defaults-fieldset",className:"text-xs px-2 py-1 rounded border border-[#cbbf9c] text-[#4a4220] bg-[#faf9f5] hover:bg-[#f3efe5] transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#2a452c]",onClick:()=>{b(e=>Object.fromEntries(Object.keys(e).map(e=>[e,!1]))),c(!1)},children:"Clear all"})]}),(0,a.jsxs)("fieldset",{id:"manage-defaults-fieldset","aria-labelledby":"manage-defaults-title",className:"max-h-72 overflow-auto rounded-md border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("legend",{className:"sr-only",children:"Default tasks"}),(0,a.jsx)("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:m.map(e=>(0,a.jsxs)("li",{className:"p-3 flex items-start justify-between gap-4",children:[(0,a.jsxs)("label",{className:"flex-1 cursor-pointer",children:[(0,a.jsx)("span",{className:"block text-sm font-medium",children:e.name}),(0,a.jsxs)("span",{className:"block text-xs text-gray-600 dark:text-gray-400",children:[e.category," • ",e.frequency]})]}),(0,a.jsx)("input",{id:"show-".concat(e.id),type:"checkbox",className:"mt-1 h-4 w-4",checked:!!x[e.id],"aria-label":'Show "'.concat(e.name,'" in task list'),onChange:()=>g(e.id)})]},e.id))})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,a.jsx)("button",{type:"button",className:"text-sm px-3 py-2 rounded-md border border-gray-300 bg-white hover:bg-gray-50 text-orange-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#2a452c]",onClick:()=>{b(Object.fromEntries(m.map(e=>[e.id,!e.factoryHidden]))),c(!0)},children:"Reset defaults"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"text-sm px-3 py-2 rounded-md border border-gray-300 bg-white hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#2a452c]",children:"Close"}),(0,a.jsx)("button",{type:"button",className:"text-sm px-4 py-2 rounded-md text-white bg-[#557C2D] hover:bg-[#6ea13e] shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#2a452c]",onClick:()=>{m.forEach(e=>{let{id:t,hidden:s}=e,a=!x[t];s!==a&&r(t,a)}),o&&m.forEach(e=>{e.completed&&i(e.id,!1)}),s()},children:"Save changes"})]})]})]})},ee=()=>{let{totalTasks:e,completedTasks:t,percentage:s,taskFrequencyNotComplete:n}=X(),[r,i]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"relative flex flex-col",children:[(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsx)("h2",{id:"task-summary-title",className:"text-lg font-semibold text-[#2a452c]",children:"Task Summary"})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 space-y-4",children:[(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-dark-bg p-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:["Completed: ",t," / ",e," (",s.toFixed(0),"%)"]}),(0,a.jsx)("div",{role:"progressbar","aria-label":"Task completion progress","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(s),className:"h-2 rounded-full bg-gray-200 overflow-hidden",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-[#2a452c]",style:{width:"".concat(s,"%")}})})]}),(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-dark-bg p-4",children:[(0,a.jsx)("h3",{className:"text-md font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Remaining by Frequency"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-2",children:[(0,a.jsxs)("li",{children:["Daily - ",n.daily]}),(0,a.jsxs)("li",{children:["Weekly - ",n.weekly]}),(0,a.jsxs)("li",{children:["Monthly - ",n.monthly]})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("button",{type:"button",onClick:()=>i(!0),className:"w-full text-sm px-4 py-2 rounded-md text-white bg-[#557C2D] hover:bg-[#6ea13e] shadow-sm",children:"Manage Defaults"})}),(0,a.jsx)(Z,{isOpen:r,onClose:()=>i(!1)})]})]})};var et=s(8502);let es=e=>{var t;let{isOpen:s,onClose:n,onSaveTask:r,taskToEdit:i}=e,[o,c]=(0,l.useState)(null!==(t=null==i?void 0:i.name)&&void 0!==t?t:""),[m,x]=(0,l.useState)((null==i?void 0:i.category)||""),[b,g]=(0,l.useState)((null==i?void 0:i.frequency)||""),[y,v]=(0,l.useState)({});(0,l.useEffect)(()=>{i?(c(i.name),x(i.category),g(i.frequency)):(c(""),x(""),g(""))},[i,s]);let N=()=>{c(""),x(""),g(""),v({}),n()},k={title:i?"Edit Task":"Add New Task",button:i?"Update Task":"Add Task",description:i?"Update the details of this gardening task.":"Start planning a new gardening task for your space."};return(0,a.jsxs)(h(),{isOpen:s,onRequestClose:N,contentLabel:k.title,role:"dialog",className:"relative w-full max-w-md mx-auto bg-white p-8 xs:rounded-lg shadow border border-gray-200 focus:outline-none",overlayClassName:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!1,aria:{modal:!0,labelledby:"modal-title",describedby:"modal-description"},children:[(0,a.jsx)("button",{type:"button",onClick:N,"aria-label":"Close",className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#2a452c] focus-visible:rounded-md w-5 h-5",children:(0,a.jsx)(d.g,{icon:u.GRI,"aria-hidden":"true"})}),(0,a.jsxs)("h2",{id:"modal-title",className:"text-2xl font-bold text-center text-[#2a452c] mt-6 mb-2",children:[(0,a.jsx)(d.g,{icon:u.DJx,className:"mr-1","aria-hidden":"true"}),k.title]}),(0,a.jsx)("p",{id:"modal-description",className:"text-sm text-center text-gray-600 mb-8",children:k.description}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t={};if(o.trim()||(t.name="Please enter a bed name."),m||(t.category="Please select a category."),b||(t.frequency="Please select a frequency."),Object.keys(t).length>0){v(t);return}r(o.trim(),m,b),p.oR.success(i?"Task updated successfully!":"New task added!"),c(""),x(""),g(""),n()},className:"space-y-4",children:[(0,a.jsx)(f.z,{id:"name",label:"Name",value:o,onChange:e=>{c(e),v(e=>({...e,name:""}))},error:y.name,maxLength:24}),(0,a.jsx)(j,{id:"task-category",label:"Select category",value:m,onChange:e=>{x(e),v(e=>({...e,category:""}))},options:et.I1,error:y.category}),(0,a.jsx)(j,{id:"task-frequency",label:"Select frequency",value:b,onChange:e=>{g(e),v(e=>({...e,frequency:""}))},options:et.ay,error:y.frequency}),(0,a.jsxs)("button",{type:"submit",className:"mt-2 w-full bg-orange-700 text-white font-semibold text-sm py-2 rounded hover:bg-orange-800 transition flex items-center justify-center",children:[(0,a.jsx)(d.g,{icon:u.QLR,className:"mr-2","aria-hidden":"true"}),k.button]})]})]})},ea=e=>{let{isOpen:t,onClose:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 transition-opacity duration-300 z-40 ".concat(t?"opacity-100":"opacity-0 pointer-events-none"),onClick:s,"aria-hidden":"true"}),(0,a.jsxs)("aside",{className:"fixed top-0 right-0 h-full w-80 bg-white border-l border-gray-200 shadow-lg transform transition-transform duration-300 z-50\n    ".concat(t?"translate-x-0":"translate-x-full"),"aria-labelledby":"task-summary-title",children:[(0,a.jsx)(ee,{}),(0,a.jsx)("button",{type:"button",onClick:s,"aria-label":"Close",className:"absolute top-4 right-8 text-gray-500 hover:text-gray-700 focus-visible:ring-2 focus-visible:ring-[#2a452c] focus-visible:rounded-md w-5 h-5",children:(0,a.jsx)(d.g,{icon:u.GRI,"aria-hidden":"true"})})]})]})},el=e=>{let{onNavigate:t,onOpenMenu:s}=e,{tasks:n,addTask:i,updateTask:d,deleteTask:u,toggleComplete:b,clearCompletedTasks:g}=(0,W.U)(),[h,f]=(0,l.useState)(!1),[y,v]=(0,l.useState)(null),[j,N]=(0,l.useState)(!1),[k,w]=(0,l.useState)(!1),{bgAccent:C}=(0,m.q)(r.h.Tasks),S=n.some(e=>e.completed),A=(0,l.useMemo)(()=>n.filter(e=>!e.hidden),[n]),E=(0,a.jsxs)(a.Fragment,{children:["Are you sure you want to ",(0,a.jsx)("strong",{children:"clear all completed tasks"}),"?"]}),O=[{label:"Dashboard",onClick:()=>null==t?void 0:t(r.h.Dashboard)},{label:"Tasks"}];return(0,l.useEffect)(()=>{let e=window.matchMedia("(min-width: 1024px)"),t=e=>{e.matches&&N(!1)};return e.matches&&N(!1),e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[N]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{breadcrumbItems:O,onOpenMenu:s}),(0,a.jsx)(o.A,{title:"Tasks",description:"Manage your gardening tasks and to-dos.",imageSrc:"".concat(D.o,"/images/clock-icon2.png"),imageAlt:"clock icon"}),(0,a.jsxs)("div",{className:"flex justify-end items-center gap-2 mb-4",children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("button",{type:"button",disabled:!S,onClick:()=>w(!0),className:"text-sm px-3 py-2 rounded-md border border-gray-300\n              focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#2a452c]\n              ".concat(S?"bg-white hover:bg-gray-50 text-[#2a452c]":"bg-gray-200 text-gray-400"),"aria-label":"Clear all completed task checkmarks",children:"Reset Progress"}),!S&&(0,a.jsx)("span",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-1 whitespace-nowrap rounded ".concat(C," px-2 py-1 text-xs text-white opacity-0 translate-y-1 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-200 ease-out z-10"),children:"No completed tasks to clear"})]}),(0,a.jsx)(x.A,{isOpen:k,onClose:()=>w(!1),onConfirm:()=>{g(),w(!1),p.Ay.success("All completed tasks have been cleared")},title:"Clear All Tasks",message:E}),(0,a.jsx)("button",{type:"button",onClick:()=>{v(null),f(!0)},className:"h-9 bg-[#244225] text-white text-sm px-4 rounded-md hover:bg-[#356a3c] transition",children:"+ Add Task"}),(0,a.jsx)("button",{type:"button",onClick:()=>N(!0),"aria-haspopup":"dialog","aria-expanded":j,className:"text-sm px-4 py-2 rounded-md border border-gray-300 bg-white hover:bg-gray-50   dark:bg-dark-bg dark:border-gray-600 dark:hover:bg-gray-800 lg:hidden",children:"Task Summary"})]}),(0,a.jsx)(es,{isOpen:h,onClose:()=>f(!1),onSaveTask:(e,t,s)=>{y?d({...y,name:e,category:t,frequency:s}):i(e,t,s),f(!1),v(null)},taskToEdit:y}),(0,a.jsxs)("div",{className:"mx-auto w-full grid grid-cols-1 gap-6 lg:grid-cols-[minmax(0,1fr)_380px] xl:grid-cols-[minmax(0,1fr)_440px] 2xl:grid-cols-[minmax(0,1fr)_500px]",children:[A.length>0?(0,a.jsx)($,{visibleTasks:A,onEditTask:e=>{v(e),f(!0)},onDeleteTask:e=>{u(e),p.Ay.success("Task deleted successfully")},toggleComplete:b}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center text-gray-500",children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-[#2a452c]",children:"No tasks yet"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Add a task to start tracking what needs to get done."})]}),(0,a.jsx)("aside",{className:"hidden lg:block",children:(0,a.jsx)("div",{className:" rounded-lg border bg-white p-4 shadow-sm",children:(0,a.jsx)(ee,{})})})]}),(0,a.jsx)(ea,{isOpen:j,onClose:()=>N(!1)})]})};var en=s(5614);let er=e=>{let{harvest:t,onEditHarvest:s,onDeleteHarvest:n}=e,[i,o]=(0,l.useState)(!1),{textAccent:c}=(0,m.q)(r.h.Harvest),b=(0,a.jsxs)(a.Fragment,{children:["Are you sure you want to remove ",(0,a.jsx)("strong",{children:t.name}),"?"]});return(0,a.jsxs)("div",{role:"group","aria-label":"Harvest entry card",className:"rounded-lg border border-gray-200 bg-white p-5 shadow-sm transition flex flex-col",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-start justify-between border-b border-gray-300 pb-2",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:t.name}),(0,a.jsxs)("div",{className:"flex gap-3 text-sm",children:[(0,a.jsx)("button",{type:"button",onClick:()=>s(t),"aria-label":"Edit harvest entry",className:"text-[#475569] focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-[#244225] rounded-sm",children:(0,a.jsx)(d.g,{icon:u.hpd,"aria-hidden":"true"})}),(0,a.jsx)("button",{type:"button",onClick:()=>o(!0),"aria-label":"Delete ".concat(t.name," harvest"),className:"text-[#991b1b] focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-[#244225] rounded-sm",children:(0,a.jsx)(d.g,{icon:u.yLS,"aria-hidden":"true"})})]}),(0,a.jsx)(x.A,{isOpen:i,onClose:()=>o(!1),onConfirm:()=>{n(t.id),o(!1),p.Ay.success("Harvest deleted successfully")},confirmLabel:"Delete Harvest",title:"Delete ".concat(t.name," harvest"),message:b})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 space-y-3",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.g,{icon:u.wsI,"aria-hidden":"true",className:"".concat(c," pb-1")}),(0,a.jsx)("strong",{className:"text-gray-800",children:"Amount:"}),t.quantity," ",(0,en.j)(t.quantity,t.unit)]}),(0,a.jsxs)("p",{className:"flex items-start gap-2",children:[(0,a.jsx)(d.g,{icon:u.l6G,"aria-hidden":"true",className:"".concat(c," pt-[2px]")}),(0,a.jsx)("strong",{className:"text-gray-800",children:"Harvested: "})," ",(0,O.Y)(t.dateHarvested)]}),(0,a.jsxs)("p",{className:"flex items-start gap-2 text-sm ",children:[(0,a.jsx)(d.g,{icon:u.DX_,"aria-hidden":"true",className:"".concat(c," pt-[2px]")}),(0,a.jsx)("strong",{className:"text-gray-800",children:"Category: "})," ",t.category]})]})]})},ei=e=>{switch(e){case"Leafy greens":case"Herbs":return"bunches";case"Fruiting veggies":case"Roots":return"lbs";default:return"count"}};var eo=s(8429);let ec=e=>{var t;let{isOpen:s,onClose:n,onSaveHarvest:r,harvestToEdit:i}=e,[o,c]=(0,l.useState)(""),[m,x]=(0,l.useState)(""),[b,g]=(0,l.useState)(null!==(t=null==i?void 0:i.category)&&void 0!==t?t:""),[y,v]=(0,l.useState)(""),[N,k]=(0,l.useState)({});(0,l.useEffect)(()=>{i?(c(i.name),x(i.quantity.toString()),v(i.dateHarvested),g(i.category)):(c(""),x(""),v(""),g(""))},[i,s]);let w=()=>{c(""),x(""),v(""),g(""),k({}),n()},C={title:i?"Edit Harvest":"Add New Harvest",button:i?"Update Harvest":"Add Harvest",description:i?"Update the details of this harvest entry.":"Record a new harvest from your garden."};return(0,a.jsxs)(h(),{isOpen:s,onRequestClose:w,contentLabel:C.title,role:"dialog",className:"relative w-full max-w-md mx-auto bg-white p-8 xs:rounded-lg shadow border border-gray-200 focus:outline-none",overlayClassName:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!0,aria:{modal:!0,labelledby:"modal-title",describedby:"modal-description"},children:[(0,a.jsx)("button",{type:"button",onClick:w,"aria-label":"Close",className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#2a452c] focus-visible:rounded-md w-5 h-5",children:(0,a.jsx)(d.g,{icon:u.GRI,"aria-hidden":"true"})}),(0,a.jsxs)("h2",{id:"modal-title",className:"text-2xl font-bold text-center text-[#2a452c] mt-6 mb-2",children:[(0,a.jsx)(d.g,{icon:u.wsI,className:"mr-1","aria-hidden":"true"}),C.title]}),(0,a.jsx)("p",{id:"modal-description",className:"text-sm text-center text-gray-600 mb-8",children:C.description}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t={};o.trim()||(t.name="Please enter a crop name.");let s=parseFloat(m);if((!m.trim()||isNaN(s)||s<=0)&&(t.quantity="Please enter a valid amount."),y.trim()||(t.dateHarvested="Please enter a harvested date."),b||(t.type="Please select a category."),Object.keys(t).length>0){k(t);return}r(o.trim(),s,y.trim(),b),p.oR.success(i?"Harvest updated successfully!":"New harvest added!"),c(""),x(""),v(""),g(""),n()},className:"space-y-4",children:[(0,a.jsx)(f.z,{id:"name",label:"Name",value:o,onChange:e=>{c(e),k(e=>({...e,name:""}))},error:N.name,maxLength:24}),(0,a.jsx)(f.z,{id:"harvest-dateHarvested",label:"Date Harvested",value:y,onChange:e=>{v(e),k(e=>({...e,dateHarvested:""}))},type:"date",error:N.dateHarvested}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsx)(j,{id:"harvest-category",label:"Select category",value:b,onChange:e=>{g(e),k(e=>({...e,type:""}))},options:eo.a,error:N.type}),(0,a.jsx)("div",{className:b?"":"opacity-60",children:(0,a.jsx)(f.z,{id:"harvest-quantity",label:"Qty ".concat(b?"(".concat(ei(b),")"):""),value:m,onChange:e=>{x(e),k(e=>({...e,quantity:""}))},type:"number",min:0,error:N.quantity,maxLength:24,disabled:!b})})]}),(0,a.jsxs)("button",{type:"submit",className:"mt-2 w-full bg-orange-700 text-white font-semibold text-sm py-2 rounded hover:bg-orange-800 transition flex items-center justify-center",children:[(0,a.jsx)(d.g,{icon:u.QLR,className:"mr-2","aria-hidden":"true"}),C.button]})]})]})};var ed=s(8392);let eu=e=>{let{onNavigate:t,onOpenMenu:s}=e,{harvests:n,addHarvest:i,updateHarvest:d,deleteHarvest:u}=(0,ed.s)(),[m,x]=(0,l.useState)(!1),[b,g]=(0,l.useState)(null),h=null!==b,p=[{label:"Dashboard",onClick:()=>null==t?void 0:t(r.h.Dashboard)},{label:"Harvest"}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{breadcrumbItems:p,onOpenMenu:s}),(0,a.jsx)(o.A,{title:"Harvest",description:"Review your harvests and track your garden productivity.",imageSrc:"".concat(D.o,"/images/basket-icon.png"),imageAlt:"basket icon"}),(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsx)("button",{type:"button",onClick:()=>x(!0),className:"bg-[#244225] text-white text-sm px-4 py-2 rounded hover:bg-[#356a3c] transition focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#244225]",children:"+ Add Harvest"})}),(0,a.jsx)(ec,{isOpen:m||h,harvestToEdit:b,onClose:()=>{x(!1),g(null)},onSaveHarvest:(e,t,s,a)=>{let l=ei(a);b?d({...b,name:e,quantity:t,dateHarvested:s,unit:l,category:a}):i(e,t,s,l,a)}}),(0,a.jsx)("section",{"aria-label":"Soil records",children:0===n.length?(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,a.jsx)("p",{className:"text-lg mb-2",children:"No Harvests yet"}),(0,a.jsx)("p",{className:"text-sm",children:'Click "Add Harvest" to record your first harvest.'})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:n.map(e=>(0,a.jsx)(er,{harvest:e,onDeleteHarvest:u,onEditHarvest:e=>g(e)},e.id))})})]})};var em=s(5417),ex=s(8893);let eb=e=>{var t;let{isOpen:s,onClose:n,onSaveSoilRecord:r,soilRecordToEdit:i}=e,[o,c]=(0,l.useState)(""),[m,x]=(0,l.useState)(null!==(t=null==i?void 0:i.season)&&void 0!==t?t:""),[b,g]=(0,l.useState)({});(0,l.useEffect)(()=>{i?(c(i.name),x(i.season)):(c(""),x(""))},[i,s]);let y=()=>{c(""),x(""),g({}),n()},v={title:i?"Edit Soil Record":"Add New Soil Record",button:i?"Update Soil Record":"Add Soil Record",description:i?"Update the details of this soil record.":"Record a new soil health entry for your garden."};return(0,a.jsxs)(h(),{isOpen:s,onRequestClose:y,contentLabel:v.title,role:"dialog",className:"relative w-full max-w-md mx-auto bg-white p-8 xs:rounded-lg shadow border border-gray-200 focus:outline-none",overlayClassName:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!0,aria:{modal:!0,labelledby:"modal-title",describedby:"modal-description"},children:[(0,a.jsx)("button",{type:"button",onClick:y,"aria-label":"Close",className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#2a452c] rounded w-5 h-5",children:(0,a.jsx)(d.g,{icon:u.GRI,"aria-hidden":"true"})}),(0,a.jsxs)("h2",{id:"modal-title",className:"text-2xl font-bold text-center text-[#2a452c] mt-6 mb-2",children:[(0,a.jsx)(d.g,{icon:u.DJx,className:"mr-1","aria-hidden":"true"}),v.title]}),(0,a.jsx)("p",{id:"modal-description",className:"text-sm text-center text-gray-600 mb-8",children:v.description}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t={};if(o.trim()||(t.name="Please enter a bed name."),m||(t.season="Please select a season."),Object.keys(t).length>0){g(t);return}r(o.trim(),m),p.oR.success(i?"Soil record updated successfully!":"Soil record added successfully!"),c(""),x(""),n()},className:"space-y-4",children:[(0,a.jsx)(f.z,{id:"name",label:"Bed Name",value:o,onChange:e=>{c(e),g(e=>({...e,name:""}))},error:b.name,maxLength:24}),(0,a.jsx)(j,{id:"soil-record-season",label:"Select season",value:m,onChange:e=>{x(e),g(e=>({...e,season:""}))},options:ex.RL,error:b.season}),(0,a.jsxs)("button",{type:"submit",className:"mt-2 w-full bg-orange-700 text-white font-semibold text-sm py-2 rounded hover:bg-orange-800 transition flex items-center justify-center focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#d34712] ",children:[(0,a.jsx)(d.g,{icon:u.QLR,className:"mr-2","aria-hidden":"true"}),v.button]})]})]})};var eg=s(8168),eh=s(4395);let ep=e=>{let{options:t,selectedAmendments:s,onChange:n,open:r,onToggle:i}=e,o=(0,l.useRef)(null),c=(0,l.useRef)(null),m=(0,l.useRef)(new Map),x=()=>{r&&(i(),setTimeout(()=>{var e;null===(e=c.current)||void 0===e||e.focus()},0))};M(o,r,x);let b=e=>{n(s.includes(e)?s.filter(t=>t!==e):[...s,e]),setTimeout(()=>{var t;null===(t=m.current.get(e))||void 0===t||t.focus()},0)},g=e=>s.includes(e),h=e=>["w-full cursor-pointer select-none px-4 py-2 text-left text-sm","focus:outline-none","focus-visible:relative focus-visible:z-10","focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-[#0E2F1F]",e?"bg-[#1E6635] text-white":"text-gray-700 hover:bg-[#F1F8EB] hover:text-gray-900"].join(" "),p=(e,t)=>{"Enter"===e.key||" "===e.key?(e.preventDefault(),b(t)):"Escape"===e.key&&(e.preventDefault(),x())};return(0,a.jsxs)("div",{ref:o,className:"relative",children:[(0,a.jsx)("button",{ref:c,type:"button","aria-label":"Add amendment",className:"flex h-5 w-5 items-center justify-center rounded-full border border-gray-300 text-gray-500 hover:border-[#244225] hover:text-[#244225]",onClick:i,"aria-haspopup":"listbox","aria-expanded":r,children:(0,a.jsx)("span",{className:"text-sm leading-none",children:"+"})}),r&&(0,a.jsxs)("div",{role:"listbox","aria-label":"Soil amendments","aria-multiselectable":"true",className:"absolute left-0 top-full z-[99] mt-2 w-64 rounded-md border bg-white shadow-lg",children:[(0,a.jsx)("div",{className:"py-1 max-h-60 overflow-y-auto",children:t.map(e=>{let t=g(e);return(0,a.jsx)("div",{role:"option","aria-selected":t,tabIndex:0,ref:t=>{t?m.current.set(e,t):m.current.delete(e)},className:h(t),onClick:()=>b(e),onKeyDown:t=>p(t,e),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"relative w-5 h-5 flex-shrink-0",children:[(0,a.jsx)("input",{type:"checkbox",checked:t,readOnly:!0,tabIndex:-1,"aria-hidden":"true",className:"peer appearance-none w-5 h-5 border border-gray-300 rounded checked:bg-[#154D29] checked:border-transparent pointer-events-none"}),(0,a.jsx)(d.g,{icon:u.e68,className:"w-4 h-4 text-white absolute pointer-events-none opacity-0 scale-75 transition-all duration-200 ease-out peer-checked:opacity-100 peer-checked:scale-100 left-0 top-0 m-0.5","aria-hidden":"true"})]}),(0,a.jsx)("span",{className:"truncate",children:(0,eg.Z)(e)})]})},e)})}),s.length>0&&(0,a.jsx)("div",{className:"border-t px-2 py-2",children:(0,a.jsx)("div",{className:"flex items-center justify-end",children:(0,a.jsx)("button",{type:"button",className:"text-xs underline underline-offset-2 focus:outline-none focus:ring-2 focus:ring-[#478143] focus:ring-offset-1",onClick:()=>{n([]),setTimeout(()=>{let e=m.current.get(t[0]);null==e||e.focus()},0)},"aria-label":"Clear all selections",children:"Reset"})})})]})]})},ef=e=>{let{isOpen:t,onClose:s,onSaveSoilTest:n}=e,[r,i]=(0,l.useState)(""),[o,c]=(0,l.useState)(""),[m,x]=(0,l.useState)(""),[b,g]=(0,l.useState)(""),[y,v]=(0,l.useState)(""),[N,k]=(0,l.useState)({}),w=()=>{v(""),i(""),c(""),x(""),g("")},C={dateTested:y,pH:r,nitrogen:o,phosphorus:m,potassium:b},S=()=>{v(""),i(""),c(""),x(""),g(""),k({}),s()};(0,l.useEffect)(()=>{t||w()},[t]);let A={title:"Add New Soil Test",button:"Add Soil Test",description:"Record a new soil test entry for your garden."};return(0,a.jsxs)(h(),{isOpen:t,onRequestClose:S,contentLabel:A.title,role:"dialog",className:"relative w-full max-w-md mx-auto bg-white p-8 xs:rounded-lg shadow border border-gray-200 focus:outline-none",overlayClassName:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!0,aria:{modal:!0,labelledby:"modal-title",describedby:"modal-description"},children:[(0,a.jsx)("button",{type:"button",onClick:S,"aria-label":"Close",className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#2a452c] rounded w-5 h-5",children:(0,a.jsx)(d.g,{icon:u.GRI,"aria-hidden":"true"})}),(0,a.jsxs)("h2",{id:"modal-title",className:"text-2xl font-bold text-center text-[#2a452c] mt-6 mb-2",children:[(0,a.jsx)(d.g,{icon:u.DJx,className:"mr-1","aria-hidden":"true"}),A.title]}),(0,a.jsx)("p",{id:"modal-description",className:"text-sm text-center text-gray-600 mb-8",children:A.description}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t={};if(Object.entries(C).forEach(e=>{let[s,a]=e;a.trim()||(t[s]="Please enter a value.")}),Object.keys(t).length>0){k(t);return}n({dateTested:y.trim(),pH:r.trim(),nitrogen:o.trim(),phosphorus:m.trim(),potassium:b.trim()}),p.Ay.success("Soil test added successfully!"),w(),s()},className:"space-y-4",children:[(0,a.jsx)(f.z,{id:"soil-dateTested",label:"Date Tested",value:y,onChange:e=>{v(e),k(e=>({...e,dateTested:""}))},type:"date",error:N.dateTested}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(j,{id:"soil-pH",label:"pH",value:r,onChange:e=>{i(e),k(e=>({...e,pH:""}))},options:ex.GB,error:N.pH}),(0,a.jsx)(j,{id:"soil-nitrogen",label:"Nitrogen",value:o,onChange:e=>{c(e),k(e=>({...e,nitrogen:""}))},options:ex.ar,error:N.nitrogen})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(j,{id:"soil-phosphorus",label:"Phosphorus",value:m,onChange:e=>{x(e),k(e=>({...e,phosphorus:""}))},options:ex.ar,error:N.phosphorus}),(0,a.jsx)(j,{id:"soil-potassium",label:"Potassium",value:b,onChange:e=>{g(e),k(e=>({...e,potassium:""}))},options:ex.ar,error:N.potassium})]}),(0,a.jsxs)("button",{type:"submit",className:"mt-2 w-full bg-orange-700 text-white font-semibold text-sm py-2 rounded hover:bg-orange-800 transition flex items-center justify-center focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#d34712] ",children:[(0,a.jsx)(d.g,{icon:u.QLR,className:"mr-2","aria-hidden":"true"}),A.button]})]})]})},ey=e=>{let{isOpen:t,onClose:s,soilTests:n}=e,r=(0,l.useId)(),i=(0,l.useId)(),o=[...n].sort((e,t)=>new Date(t.dateTested).getTime()-new Date(e.dateTested).getTime());return(0,a.jsxs)(h(),{isOpen:t,onRequestClose:s,shouldCloseOnEsc:!0,shouldReturnFocusAfterClose:!0,contentLabel:"Soil Test History",aria:{labelledby:r,describedby:i},className:"relative w-full max-w-md mx-auto bg-white dark:bg-dark-bg p-8 xs:rounded-lg shadow-xl border border-gray-200 dark:border-gray-800 focus:outline-none",overlayClassName:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{id:r,className:"text-xl font-bold text-[#1E6635] dark:text-[#79B040]",children:"Soil Test History"}),(0,a.jsx)("p",{id:i,className:"text-sm text-gray-500 dark:text-gray-400 mt-1 leading-snug",children:"Review past soil test results for this bed and see how your soil has evolved over time."})]}),(0,a.jsx)("button",{type:"button",onClick:s,"aria-label":"Close",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 focus:ring-2 focus:ring-[#1E6635] rounded-md outline-none transition-colors",children:(0,a.jsx)(d.g,{icon:u.GRI,className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{tabIndex:0,role:"region","aria-label":"Soil test list",onKeyDown:e=>{let{key:t,currentTarget:s}=e;"ArrowDown"===t?(e.preventDefault(),s.scrollTop+=50):"ArrowUp"===t&&(e.preventDefault(),s.scrollTop-=50)},className:"max-h-[450px] overflow-y-auto pr-1 space-y-2 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#244225] focus-visible:ring-offset-4 rounded-lg",children:[o.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-lg border border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-900 shadow-sm flex items-center hover:border-gray-200 dark:hover:border-gray-700 transition-all",children:[(0,a.jsx)("div",{className:"w-24 shrink-0",children:(0,a.jsx)("span",{className:"text-sm font-bold text-gray-800 dark:text-gray-100",children:(0,O.Y)(e.dateTested)})}),(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-around border-l border-gray-100 dark:border-gray-800 ml-3 pl-3",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"block text-[10px] font-bold text-[#557C2D]",children:"pH"}),(0,a.jsx)("span",{className:"font-mono ",children:e.pH.toFixed(1)})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"block text-[10px] text-[#557C2D] ",children:"N"}),(0,a.jsx)("span",{className:"font-mono ",children:e.nitrogen})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"block text-[10px] text-[#557C2D] ",children:"P"}),(0,a.jsx)("span",{className:"font-mono ",children:e.phosphorus})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"block text-[10px] text-[#557C2D] ",children:"K"}),(0,a.jsx)("span",{className:"font-mono ",children:e.potassium})]})]})]},e.id)),0===o.length&&(0,a.jsx)("p",{className:"text-center py-8 text-gray-400 text-sm",children:"No records found."})]})]})},ev=["Compost","Manure","Worm Tea","Mulch","Cover Crop","Leaf mold"],ej=e=>{var t,s,n,i,o;let{soilRecord:c,onAddSoilTest:b,onEditSoilRecord:g,onDeleteSoilRecord:h}=e,[f,y]=(0,l.useState)(!1),{textAccent:v}=(0,m.q)(r.h.SoilRecord),[j,N]=(0,l.useState)(c.amendments),[k,w]=(0,l.useState)(!1),[C,S]=(0,l.useState)(!1),[A,D]=(0,l.useState)(!1),E=c.tests.length>0,R=(0,a.jsxs)(a.Fragment,{children:["Are you sure you want to remove ",(0,a.jsx)("strong",{children:c.name}),"?"]}),T=c.tests.length>0?[...c.tests].sort((e,t)=>new Date(t.dateTested).getTime()-new Date(e.dateTested).getTime())[0]:null;return(0,a.jsxs)("div",{role:"group","aria-label":"Soil Record entry card",className:"rounded-lg border border-gray-200 bg-white p-5 shadow-sm transition flex flex-col",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-start justify-between border-b border-gray-300",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:c.name}),(0,a.jsxs)("div",{className:"flex gap-3 text-sm",children:[(0,a.jsx)("button",{type:"button",onClick:()=>g(c),"aria-label":"Edit ".concat(c.name," entry"),className:"text-[#475569] focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-[#244225] rounded-sm",children:(0,a.jsx)(d.g,{icon:u.hpd,"aria-hidden":"true"})}),(0,a.jsx)("button",{type:"button",onClick:()=>y(!0),"aria-label":"Delete ".concat(c.name," soil record"),className:"text-[#991b1b] focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-[#244225] rounded-sm",children:(0,a.jsx)(d.g,{icon:u.yLS,"aria-hidden":"true"})})]}),(0,a.jsx)(x.A,{isOpen:f,onClose:()=>y(!1),onConfirm:()=>{h(c.id),y(!1),p.Ay.success("Soil record deleted successfully")},confirmLabel:"Delete Soil Record",title:"Delete ".concat(c.name," soil record"),message:R})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 space-y-2 flex-1",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.g,{icon:u.l6G,"aria-hidden":"true",className:"".concat(v," pb-1")}),(0,a.jsx)("strong",{className:"text-gray-800",children:"Season:"}),c.season]}),(0,a.jsxs)("div",{className:"min-h-[24px]",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(d.g,{icon:u.YHM,"aria-hidden":"true",className:"".concat(v," pb-1")}),(0,a.jsx)("strong",{className:"text-gray-800",children:"Amendments:"}),(0,a.jsx)(ep,{options:ev,selectedAmendments:j,onChange:e=>{c.amendments=Array.from(new Set(e)),N(c.amendments)},open:k,onToggle:()=>w(e=>!e)})]})}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:0===j.length?(0,a.jsx)("span",{className:"text-xs text-gray-500 py-0.5",children:"None logged"}):j.map(e=>(0,a.jsxs)("span",{className:(0,eh.m)(),children:[(0,eg.Z)(e),(0,a.jsx)("button",{type:"button","aria-label":"Remove ".concat(e," amendment"),className:"ml-2 text-xs text-gray-500 hover:text-white hover:bg-[#1E6635] focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-[#244225] bg-white rounded-full w-4 h-4",onClick:()=>{N(j.filter(t=>t!==e))},children:"x"})]},e))})]}),c.tests.length>0&&(0,a.jsx)("div",{className:"min-h-[24px] mt-2",children:(0,a.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[(0,a.jsx)(d.g,{icon:u.rIc,"aria-hidden":"true",className:"".concat(v," mt-0.5")}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("strong",{className:"text-gray-800",children:"Last test:"}),(0,a.jsx)("span",{className:"text-gray-700",children:null!==(t=(0,O.Y)(null==T?void 0:T.dateTested))&&void 0!==t?t:"None"})]}),(0,a.jsxs)("div",{className:"mt-1 grid grid-cols-4 gap-x-3 gap-y-1 text-xs text-gray-700",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-500",children:"pH"}),(0,a.jsx)("div",{className:"font-medium",children:null!==(s=null==T?void 0:T.pH)&&void 0!==s?s:""})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-500",children:"N"}),(0,a.jsx)("div",{className:"font-medium",children:null!==(n=null==T?void 0:T.nitrogen)&&void 0!==n?n:""})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-500",children:"P"}),(0,a.jsx)("div",{className:"font-medium",children:null!==(i=null==T?void 0:T.phosphorus)&&void 0!==i?i:""})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-500",children:"K"}),(0,a.jsx)("div",{className:"font-medium",children:null!==(o=null==T?void 0:T.potassium)&&void 0!==o?o:""})]})]})]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-10",children:[(0,a.jsx)("button",{type:"button",className:"text-white text-sm px-4 py-1 rounded transition ".concat(E?"bg-[#244225] text-white hover:bg-[#356a3c]":"bg-gray-400 text-gray-500"),onClick:()=>D(!0),"aria-label":"View details for ".concat(c.name),disabled:!E,children:"View"}),(0,a.jsx)("button",{type:"button",onClick:()=>S(!0),className:"text-sm ".concat(v," hover:underline focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-[#244225] rounded px-1"),"aria-label":"Add soil test for ".concat(c.name),children:"+ Add test"}),(0,a.jsx)(ef,{isOpen:C,onClose:()=>S(!1),onSaveSoilTest:e=>{let t={id:crypto.randomUUID(),dateTested:e.dateTested,pH:parseFloat(e.pH),nitrogen:parseFloat(e.nitrogen),phosphorus:parseFloat(e.phosphorus),potassium:parseFloat(e.potassium)};b({...c,tests:[...c.tests,t]})}}),(0,a.jsx)(ey,{isOpen:A,onClose:()=>D(!1),soilTests:c.tests})]})]},c.id)},eN=e=>{let{onNavigate:t,onOpenMenu:s}=e,{soilRecords:n,addSoilRecord:i,updateSoilRecord:d,deleteSoilRecord:u}=(0,em.d)(),[m,x]=(0,l.useState)(!1),[b,g]=(0,l.useState)(null),h=null!==b,p=[{label:"Dashboard",onClick:()=>null==t?void 0:t(r.h.Dashboard)},{label:"Soil Record"}],f=e=>{u(e)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{breadcrumbItems:p,onOpenMenu:s}),(0,a.jsx)(o.A,{title:"Soil Record",description:"Track and manage your soil health and composting activities to ensure optimal growing conditions for your plants.",imageSrc:"".concat(D.o,"/images/trowel-sprout.png"),imageAlt:"spade and sprout icon"}),(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsx)("button",{type:"button",onClick:()=>x(!0),className:"bg-[#244225] text-white text-sm px-4 py-2 rounded hover:bg-[#356a3c] transition focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#244225]","aria-label":"Add new soil record",children:"+ Add Soil Record"})}),(0,a.jsx)(eb,{isOpen:m||h,soilRecordToEdit:b,onClose:()=>{x(!1),g(null)},onSaveSoilRecord:(e,t)=>{b?d({...b,name:e,season:t}):i(e,t)}}),(0,a.jsx)("section",{"aria-label":"Soil records",children:0===n.length?(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,a.jsx)("p",{className:"text-lg mb-2",children:"No soil records yet"}),(0,a.jsx)("p",{className:"text-sm",children:'Click "Add Soil Record" to start tracking your soil health.'})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:n.map(e=>(0,a.jsx)(ej,{soilRecord:e,onAddSoilTest:d,onDeleteSoilRecord:f,onEditSoilRecord:e=>g(e)},e.id))})})]})},ek=e=>{let{activeView:t,onNavigate:s,selectedBedId:l,setSelectedBedId:n,onOpenMenu:r}=e;switch(t){case"Beds":return(0,a.jsx)(i.A,{onNavigate:s,selectedBedId:l,onSelectBed:n,onOpenMenu:r});case"Plant Log":return(0,a.jsx)(K,{onNavigate:s,onOpenMenu:r});case"Compost":return(0,a.jsx)(E,{onNavigate:s,onOpenMenu:r});case"Tasks":return(0,a.jsx)(el,{onNavigate:s,onOpenMenu:r});case"Harvest":return(0,a.jsx)(eu,{onNavigate:s,onOpenMenu:r});case"Soil Record":return(0,a.jsx)(eN,{onNavigate:s,onOpenMenu:r});default:return null}},ew=()=>{let[e,t]=(0,l.useState)(r.h.Dashboard),[s,i]=(0,l.useState)(!1),[o,d]=(0,l.useState)(null),u="Dashboard"===e?[{label:"Dashboard"}]:[{label:"Dashboard",onClick:()=>t(r.h.Dashboard)},{label:e}],m="\n  fixed md:sticky top-0 left-0 h-screen z-50 transform transition-transform duration-300 ease-in-out \n  ".concat(s?"translate-x-0":"-translate-x-full md:translate-x-0","\n");return(0,a.jsxs)("div",{className:"min-h-screen flex bg-[#f3f5f2]",children:[(0,a.jsx)("div",{className:m,children:(0,a.jsx)(n.Bx,{isOpen:s,onClose:()=>i(!1),onNavigate:e=>{t(e),i(!1)},onDeselectBed:()=>d(null)})}),(0,a.jsx)("main",{className:"flex-1 p-8 overflow-y-auto",children:"Dashboard"===e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{breadcrumbItems:u,onOpenMenu:()=>i(!0)}),(0,a.jsx)(n.vM,{}),(0,a.jsx)(n.rX,{onSelect:e=>t(e)}),(0,a.jsx)(n.tA,{onSelect:e=>t(e)})]}):(0,a.jsx)(ek,{activeView:e,onNavigate:t,selectedBedId:o,setSelectedBedId:d,onOpenMenu:()=>i(!0)})}),s&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden pointer-events-none","aria-hidden":"true"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[69,598,532,636,593,792],()=>t(7100)),_N_E=e.O()}]);